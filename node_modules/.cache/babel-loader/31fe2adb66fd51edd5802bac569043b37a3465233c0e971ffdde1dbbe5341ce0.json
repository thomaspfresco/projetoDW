{"ast":null,"code":"import _regeneratorRuntime from\"/Users/thomasfresco/Desktop/react-wordpress-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/thomasfresco/Desktop/react-wordpress-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/thomasfresco/Desktop/react-wordpress-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{API_URL}from'../../api';import ProjectList from'../../components/project-list/ProjectList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Homepage=function Homepage(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var fetchProjects=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var category,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:category=_args.length>0&&_args[0]!==undefined?_args[0]:'';setLoading(true);_context.next=4;return fetch(API_URL+\"conto\".concat(category)).then(function(response){return response.json();}).then(function(result){setProjects(result);setLoading(false);});case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchProjects(){return _ref.apply(this,arguments);};}();var fetchCategories=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(API_URL+'categories').then(function(response){return response.json();}).then(function(result){setCategories(result);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchCategories(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchProjects();fetchCategories();},[]);if(!projects||!categories){return null;}var projectList=!loading?/*#__PURE__*/_jsx(ProjectList,{projects:projects}):/*#__PURE__*/_jsx(\"h2\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Projects\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-button\",onClick:function onClick(){return fetchProjects();},children:\"All Projects\"}),categories.map(function(category){return/*#__PURE__*/_jsx(\"button\",{className:\"filter-button\",onClick:function onClick(){return fetchProjects(\"?categories=\".concat(category.id));},children:category.name},category.id);}),projectList]});};export default Homepage;","map":{"version":3,"names":["useState","useEffect","API_URL","ProjectList","Homepage","projects","setProjects","categories","setCategories","loading","setLoading","fetchProjects","category","fetch","then","response","json","result","fetchCategories","projectList","map","id","name"],"sources":["/Users/thomasfresco/Desktop/react-wordpress-main/src/pages/homepage/Homepage.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { API_URL } from '../../api';\n\nimport ProjectList from '../../components/project-list/ProjectList';\n\nconst Homepage = () => {\n\tconst [projects, setProjects] = useState(null);\n\tconst [categories, setCategories] = useState(null);\n\tconst [loading, setLoading] = useState(true);\n\n\tconst fetchProjects = async(category = '') => {\n\t\tsetLoading(true);\n\t\tawait fetch(API_URL + `conto${category}`)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(result => {\n\t\t\t\t\tsetProjects(result)\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t});\n\t}\n\n\tconst fetchCategories = async() => {\n\t\tawait fetch(API_URL + 'categories')\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(result => {\n\t\t\t\t\tsetCategories(result)\n\t\t\t\t});\n\t}\n\n\tuseEffect(() => {\n\t\tfetchProjects();\n\t\tfetchCategories();\n\t}, [])\n\n\tif (!projects || !categories) {\n\t\treturn null;\n\t}\n\n\tconst projectList = !loading ? (\n\t\t\t<ProjectList projects={projects} />\n\t\t) : (\n\t\t\t<h2>Loading...</h2>\n\t\t) \n\n\treturn (\n\t\t<div>\n\t\t\t<h2>Projects</h2>\n\t\t\t<button className=\"filter-button\" onClick={() => fetchProjects()}>All Projects</button>\n\t\t\t{categories.map(category => (\n\t\t\t\t<button \n\t\t\t\t\tclassName=\"filter-button\" \n\t\t\t\t\tkey={category.id} \n\t\t\t\t\tonClick={() => fetchProjects(`?categories=${category.id}`)}\n\t\t\t\t>{category.name}</button>\n\t\t\t\t))\n\t\t\t}\n\t\t\t{projectList}\n\t\t</div>\n\t\t)\n}\n\nexport default Homepage"],"mappings":"kaAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,OAAO,KAAQ,WAAW,CAEnC,MAAOC,YAAW,KAAM,2CAA2C,CAAC,wFAEpE,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACtB,cAAgCJ,QAAQ,CAAC,IAAI,CAAC,wCAAvCK,QAAQ,eAAEC,WAAW,eAC5B,eAAoCN,QAAQ,CAAC,IAAI,CAAC,yCAA3CO,UAAU,eAAEC,aAAa,eAChC,eAA8BR,QAAQ,CAAC,IAAI,CAAC,yCAArCS,OAAO,eAAEC,UAAU,eAE1B,GAAMC,cAAa,4FAAG,kKAAMC,QAAQ,+CAAG,EAAE,CACxCF,UAAU,CAAC,IAAI,CAAC,CAAC,sBACXG,MAAK,CAACX,OAAO,gBAAWU,QAAQ,CAAE,CAAC,CACtCE,IAAI,CAAC,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACjCF,IAAI,CAAC,SAAAG,MAAM,CAAI,CACfX,WAAW,CAACW,MAAM,CAAC,CACnBP,UAAU,CAAC,KAAK,CAAC,CAClB,CAAC,CAAC,uDACJ,kBARKC,cAAa,0CAQlB,CAED,GAAMO,gBAAe,6FAAG,iKACjBL,MAAK,CAACX,OAAO,CAAG,YAAY,CAAC,CAChCY,IAAI,CAAC,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACjCF,IAAI,CAAC,SAAAG,MAAM,CAAI,CACfT,aAAa,CAACS,MAAM,CAAC,CACtB,CAAC,CAAC,yDACJ,kBANKC,gBAAe,2CAMpB,CAEDjB,SAAS,CAAC,UAAM,CACfU,aAAa,EAAE,CACfO,eAAe,EAAE,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAI,CAACb,QAAQ,EAAI,CAACE,UAAU,CAAE,CAC7B,MAAO,KAAI,CACZ,CAEA,GAAMY,YAAW,CAAG,CAACV,OAAO,cAC1B,KAAC,WAAW,EAAC,QAAQ,CAAEJ,QAAS,EAAG,cAEnC,kCACA,CAEF,mBACC,oCACC,gCAAiB,cACjB,eAAQ,SAAS,CAAC,eAAe,CAAC,OAAO,CAAE,yBAAMM,cAAa,EAAE,EAAC,0BAAsB,CACtFJ,UAAU,CAACa,GAAG,CAAC,SAAAR,QAAQ,qBACvB,eACC,SAAS,CAAC,eAAe,CAEzB,OAAO,CAAE,yBAAMD,cAAa,uBAAgBC,QAAQ,CAACS,EAAE,EAAG,EAAC,UAC1DT,QAAQ,CAACU,IAAI,EAFTV,QAAQ,CAACS,EAAE,CAEQ,EACxB,CAAC,CAEFF,WAAW,GACP,CAER,CAAC,CAED,cAAef,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}